<!-- Wrap fuer Elemente, waehrend App laueft (Main, Shutdown) -->
<div *ngIf="!shutdown"
     class="col no-gutters p-0 d-flex app-container">

    <!-- Button zum Pi herunterfahren, wrapper damit sich opacity von Button nicht auf den Schatten auswirkt -->
    <div class="d-flex shutdown-wrapper shadow">
        <button (click)="shutdownPi()"
                [class.active]="clicks > 0"
                class="fa fa-power-off text-danger button-clean shutdown">
        </button>
    </div>

    <!-- Zustand ueber Verbindung zu WSS -->
    <div class="connection"
         (click)="activateApp()"><i class="fa fa-wifi"
           [ngClass]='{
"text-danger": !connected,
"text-success": connected
}'></i></div>

    <!-- App-Container -->
    <div class="app-content flex-grow-1 shadow">
        <div class="row no-gutters header py-2 px-3 align-items-center">

            <!-- Ueberschrift -->
            <div class="col heading">SH Player 2019</div>

            <!-- Lautstaerke -->
            <div class="col row no-gutters justify-content-end">

                <!-- leiser -->
                <button class="fa fa-volume-down ripple"
                        (click)="changeVolume(false)"
                        [disabled]="volume === 0"></button>

                <!-- lauter -->
                <button class="fa fa-volume-up ripple"
                        [disabled]="volume === 100"
                        (click)="changeVolume(true)"></button>
            </div>
        </div>

        <!-- Aktuell laufender Titel -->
        <div class="currentSong px-3 py-2">{{getCurrentSong() | fileName}}</div>

        <!-- prev, pause, next -->
        <div class="row no-gutters pt-2 justify-content-center bg-white">

            <!-- Wrapper -->
            <div class="control-content row no-gutters justify-content-between">

                <!-- previous title -->
                <button class="fa fa-fast-backward ripple"
                        (click)="changeItem(false)"></button>

                <!-- toggle pause -->
                <button class="fa ripple"
                        [ngClass]='{
    "fa-pause": !paused,
    "fa-play": paused  }'
                        (click)="togglePaused()"></button>

                <!-- next title -->
                <button class="fa fa-fast-forward ripple"
                        (click)="changeItem(true)"></button>
            </div>
        </div>

        <!-- Suchfeld -->
        <div class="px-3 pb-3 bg-white">

            <!-- Label besteht auch Icon und Suchfeld -->
            <label class="search-field form-control d-flex no-gutters align-items-center p-1 m-0"
                   for="searchField">

                <!-- Such-Symbol -->
                <i class="fa fa-search ml-2"></i>

                <!-- Suchefeld -->
                <input autofocus
                       autocomplete="off"
                       id="searchField"
                       placeholder="Lied suchen"
                       class="col ml-2"
                       (keyup)="0"
                       #search
                       type="search">
            </label>
        </div>

        <!-- Trefferliste -->
        <div *ngIf="files | filterList:search.value"
             class="bg-white pb-1">

            <!-- Dateien ausgeben, die dem Filterkriterium entsprechen -->
            <div *ngFor="let file of files | filterList:search.value | orderBy"
                 class="d-flex mx-3 align-items-center pb-2 bg-white">

                <!-- Song einreihen -->
                <button [disabled]="file.index === position"
                        class="btn btn-sm btn-outline-success mr-2"
                        (click)="enqeueSong(file.index)"><i class="fa fa-plus"></i></button>

                <!-- Bei Text wird Suchbegriff fett hinterlegt, innerHTML, weil <b> Tags fuer fett gesetzt werden, bei Click Song abspielen -->
                <div [innerHTML]="file.fileName | fileName | highlightSearch:search.value"
                     class="cursor-pointer"
                     (click)="playSong(file.index)"></div>
            </div>
        </div>

        <!-- Playlisttitel und Einfuegemarke ausgeben -->
        <div *ngFor="let file of files; index as index, last as last"
             class="bg-white"
             [ngClass]="{
                 'pb-2 border-radius-bottom': last
                }">

            <!-- Titelinfo, , aktuellen Song fett darstellen -->
            <div [ngClass]="{
                'font-weight-bold': index === position,
                'alreday-played': index < position}"
                 class="cursor-pointer px-3"
                 (click)="jumpTo(index)">
                {{file | fileName}}

                <!-- Spinner anzeigen, wenn zu diesem Titel gesprungen werden soll -->
                <i class="fa fa-spinner fa-spin"
                   *ngIf="index === jumpPosition"></i>
            </div>

            <!-- Einfuegemarke, wo der naechste neue Titel eingefuegt wird -->
            <div class="ml-3"
                 *ngIf="index === (position + insertOffset) % files.length">
                <i class="fa fa-arrow-right"></i>
            </div>
        </div>
    </div>
</div>

<!-- Anzeigen, wenn Pi heruntergefahren wurde -->
<div *ngIf="shutdown"
     class="container mr-0 ml-0 no-gutters p-3">
    Die Anwendung wurde beendet.
</div>